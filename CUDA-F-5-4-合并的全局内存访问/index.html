<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=6.4.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png?v=6.4.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png?v=6.4.0"><link rel="mask-icon" href="/images/logo.png?v=6.4.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"6.4.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="Abstract: æœ¬æ–‡ä»‹ç»ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡ŒçŸ©é˜µè½¬ç½®ä»¥å‡å°‘å†…å­˜çš„äº¤å‰è®¿é—®Keywords: åˆå¹¶ï¼Œè½¬ç½®"><meta name="keywords" content="åˆå¹¶,è½¬ç½®"><meta property="og:type" content="article"><meta property="og:title" content="ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®"><meta property="og:url" content="http://www.face2ai.com/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/index.html"><meta property="og:site_name" content="è°­å‡çš„åšå®¢"><meta property="og:description" content="Abstract: æœ¬æ–‡ä»‹ç»ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡ŒçŸ©é˜µè½¬ç½®ä»¥å‡å°‘å†…å­˜çš„äº¤å‰è®¿é—®Keywords: åˆå¹¶ï¼Œè½¬ç½®"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-1.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-2.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-3.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-4.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-5.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/1-2.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-5-5.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-6.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-7.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-8.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-8-5.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-9.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-11.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-12.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-13.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/1-3.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-1-13-5.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-14.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-15.png"><meta property="og:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-16.png"><meta property="og:updated_time" content="2018-07-12T15:45:31.514Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®"><meta name="twitter:description" content="Abstract: æœ¬æ–‡ä»‹ç»ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡ŒçŸ©é˜µè½¬ç½®ä»¥å‡å°‘å†…å­˜çš„äº¤å‰è®¿é—®Keywords: åˆå¹¶ï¼Œè½¬ç½®"><meta name="twitter:image" content="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-1.png"><link rel="canonical" href="http://www.face2ai.com/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—® | è°­å‡çš„åšå®¢</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-105335860-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-105335860-3")</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">è°­å‡çš„åšå®¢</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Machine Learning & Computer Vision</h1></div><div class="site-nav-toggle"><button aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-é¦–é¡µ"><a href="/" rel="section">é¦–é¡µ</a></li><li class="menu-item menu-item-æ•°å­¦"><a href="/categories/Mathematic/" rel="section">æ•°å­¦</a></li><li class="menu-item menu-item-Â·Â·Â·-é›†åˆè®º"><a href="/categories/Mathematic/Set-Theory/" rel="section">Â·Â·Â· é›†åˆè®º</a></li><li class="menu-item menu-item-Â·Â·Â·-çº¿æ€§ä»£æ•°åŸºç¡€"><a href="/categories/Mathematic/Linear-Algebra/" rel="section">Â·Â·Â· çº¿æ€§ä»£æ•°åŸºç¡€</a></li><li class="menu-item menu-item-Â·Â·Â·-æ¦‚ç‡è®ºåŸºç¡€"><a href="/categories/Mathematic/Probability/" rel="section">Â·Â·Â· æ¦‚ç‡è®ºåŸºç¡€</a></li><li class="menu-item menu-item-Â·Â·Â·-æ•°ç†ç»Ÿè®¡å­¦"><a href="/categories/Mathematic/Statistics/" rel="section">Â·Â·Â· æ•°ç†ç»Ÿè®¡å­¦</a></li><li class="menu-item menu-item-Â·Â·Â·-æ•°å€¼åˆ†æ"><a href="/categories/Mathematic/Numerical-Analysis/" rel="section">Â·Â·Â· æ•°å€¼åˆ†æ</a></li><li class="menu-item menu-item-æœºå™¨å­¦ä¹ ç®—æ³•"><a href="/categories/Machine-Learning/" rel="section">æœºå™¨å­¦ä¹ ç®—æ³•</a></li><li class="menu-item menu-item-å¼ºåŒ–å­¦ä¹ "><a href="/categories/Reinforcement-Learning/" rel="section">å¼ºåŒ–å­¦ä¹ </a></li><li class="menu-item menu-item-æ·±åº¦å­¦ä¹ ç®—æ³•"><a href="/categories/Deep-Learning/" rel="section">æ·±åº¦å­¦ä¹ ç®—æ³•</a></li><li class="menu-item menu-item-æ•°å­—å›¾åƒå¤„ç†"><a href="/categories/DIP/" rel="section">æ•°å­—å›¾åƒå¤„ç†</a></li><li class="menu-item menu-item-30å¤©è‡ªåˆ¶æ“ä½œç³»ç»Ÿ"><a href="/categories/30å¤©è‡ªåˆ¶æ“ä½œç³»ç»Ÿ/" rel="section">30å¤©è‡ªåˆ¶æ“ä½œç³»ç»Ÿ</a></li><li class="menu-item menu-item-cuda"><a href="/categories/CUDA/" rel="section">CUDA</a></li><li class="menu-item menu-item-ç½‘ç»œçˆ¬è™«"><a href="/categories/Crawler/" rel="section">ç½‘ç»œçˆ¬è™«</a></li><li class="menu-item menu-item-ä¹±ä¸ƒå…«ç³Ÿ"><a href="/categories/Other/" rel="section">ä¹±ä¸ƒå…«ç³Ÿ</a></li></ul></nav><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/Wechat.jpeg" alt="wechat"></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1194454329688573" data-ad-slot="9135658886" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.face2ai.com/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Tony"><meta itemprop="description" content="å…³æ³¨æœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œæœºå™¨è§†è§‰ï¼Œæ¨¡å¼è¯†åˆ«"><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="è°­å‡çš„åšå®¢"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2018-06-04 21:34:22" itemprop="dateCreated datePublished" datetime="2018-06-04T21:34:22+08:00">2018-06-04</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CUDA/" itemprop="url" rel="index"><span itemprop="name">CUDA</span></a></span> ï¼Œ <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CUDA/Freshman/" itemprop="url" rel="index"><span itemprop="name">Freshman</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/#SOHUCS" itemprop="discussionUrl"><span class="post-meta-item-text">è¯„è®ºæ•°ï¼š</span> <span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/" itemprop="commentsCount"></span> </a><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> é˜…è¯»æ¬¡æ•°ï¼š <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></span></div></header><div class="post-body" itemprop="articleBody"><p><strong>Abstract:</strong> æœ¬æ–‡ä»‹ç»ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡ŒçŸ©é˜µè½¬ç½®ä»¥å‡å°‘å†…å­˜çš„äº¤å‰è®¿é—®<br><strong>Keywords:</strong> åˆå¹¶ï¼Œè½¬ç½®</p><a id="more"></a><h2 id="å¼€ç¯‡åºŸè¯"><a href="#å¼€ç¯‡åºŸè¯" class="headerlink" title="å¼€ç¯‡åºŸè¯"></a>å¼€ç¯‡åºŸè¯</h2><p>æ²¡åºŸè¯ï¼Œçœ‹ä»¥å‰çš„åºŸè¯æ„Ÿè§‰è‡ªå·±åƒä¸ªå‚»ç“œã€‚ã€‚å°±åƒä»¥åçœ‹æˆ‘æ­£åœ¨å†™çš„æ–‡å­—ä¸€æ ·ã€‚<br>è¿˜è®°å¾—æˆ‘ä»¬çŸ©é˜µè½¬ç½®çš„ä¾‹å­ä¹ˆï¼Œåœ¨å…¨å±€å†…å­˜éƒ¨åˆ†ä»‹ç»çš„ï¼š<a href="https://face2ai.com/CUDA-F-4-4-æ ¸å‡½æ•°å¯è¾¾åˆ°çš„å¸¦å®½/" target="_blank" rel="noopener">4.4æ ¸å‡½æ•°å¯è¾¾åˆ°çš„å¸¦å®½</a><br>åœ¨4.4ä¸­æˆ‘ä»¬å½“æ—¶åªæœ‰å…±äº«å†…å­˜è¿™ä¸€ç§å·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œä¸ºäº†è¾¾åˆ°æœ€é«˜æ•ˆç‡ï¼Œæˆ‘ä»¬è¦é…åˆä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜è¿›è¡Œç¼–ç¨‹ï¼Œæ¥æé«˜è½¬ç½®çš„æ•ˆç‡ï¼Œå› ä¸ºè½¬ç½®åªèƒ½åœ¨è¡Œè¯»å–åˆ—å†™å…¥æˆ–è€…åˆ—è¯»å–è¡Œå†™å…¥ä¹‹é—´é€‰æ‹©ä¸€ä¸ªï¼Œè¿™æ ·å°±å¿…ç„¶ä¼šå¼•å‘éåˆå¹¶çš„è®¿é—®ï¼Œè™½ç„¶æˆ‘ä»¬åˆ©ç”¨ä¸€çº§ç¼“å­˜çš„æ€§è´¨å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬ä»Šå¤©ä¼šä»‹ç»æˆ‘ä»¬çš„æ–°å·¥å…·å…±äº«å†…å­˜ï¼Œåœ¨å…±äº«å†…å­˜ä¸­å®Œæˆè½¬ç½®åå†™å…¥å…¨å±€å†…å­˜ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…äº¤å‰è®¿é—®äº†ã€‚</p><h2 id="åŸºå‡†è½¬ç½®å†…æ ¸"><a href="#åŸºå‡†è½¬ç½®å†…æ ¸" class="headerlink" title="åŸºå‡†è½¬ç½®å†…æ ¸"></a>åŸºå‡†è½¬ç½®å†…æ ¸</h2><p>åœ¨ä»‹ç»æˆ‘ä»¬çš„ç¥å¥‡å…±äº«å†…å­˜ä¹‹å‰ï¼Œæˆ‘ä»¬æœ€å¥½å…ˆç ”ç©¶å‡ºæ¥ä¸€ä¸‹æˆ‘ä»¬çš„é—®é¢˜çš„æé™åœ¨å“ªï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥šçš„çŸ¥é“æˆ‘ä»¬æœ€æ…¢çš„æƒ…å†µï¼ˆæœ€ç®€å•çš„æ–¹å¼èƒ½è¾¾åˆ°çš„é€Ÿåº¦ï¼‰ä»¥åŠæœ€å¿«çš„ç†è®ºé€Ÿåº¦ï¼Œç†è®ºé€Ÿåº¦å¯èƒ½ä¼šè¾¾ä¸åˆ°ï¼Œä½†æ˜¯å¯ä»¥æ¥è¿‘ï¼Œæœ€æ…¢é€Ÿåº¦è‚¯å®šå¯ä»¥è¶…è¶Šï¼Œä½ æ°¸è¿œå¯ä»¥å†™å‡ºæ›´æ…¢çš„ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æœ€ç®€å•çš„æ–¹æ³•ä½œä¸ºä¸‹ç•Œï¼Œè€Œç”¨æ­£è¡Œè¯»å–ï¼Œç„¶åä¸ç»å˜æ¢çš„å†™å…¥æ¥ä½œä¸ºä¸Šé™ï¼Œè¿™ä¸€æ‹›æˆ‘ä»¬åœ¨å‰é¢ä½¿ç”¨è¿‡ï¼Œå°±æ˜¯åœ¨4.4ä¸­ï¼Œé‚£æ¬¡æˆ‘ä»¬çªç ´æé™äº†ï¼ˆå“ˆå“ˆï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯è®¡æ—¶æœ‰é—®é¢˜ï¼‰ï¼Œä½†æ˜¯æ­£å¸¸æ¥è®²ï¼Œæé™æ˜¯æœ€å¥½çš„å‚è€ƒå€¼ã€‚<br>å®Œæ•´çš„ä»£ç åœ¨github:<a href="https://github.com/Tony-Tan/CUDA_Freshman" target="_blank" rel="noopener">https://github.com/Tony-Tan/CUDA_Freshman</a>ï¼ˆæ¬¢è¿éšæ‰‹starğŸ˜ ï¼‰<br>ä¸Šé™ï¼š<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">__<span class="function">global__ <span class="keyword">void</span> <span class="title">copyRow</span><span class="params">(<span class="keyword">float</span> * in,<span class="keyword">float</span> * out,<span class="keyword">int</span> nx,<span class="keyword">int</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ix=threadIdx.x+blockDim.x*blockIdx.x;</span><br><span class="line">    <span class="keyword">int</span> iy=threadIdx.y+blockDim.y*blockIdx.y;</span><br><span class="line">    <span class="keyword">int</span> idx=ix+iy*nx;</span><br><span class="line">    <span class="keyword">if</span> (ix&lt;nx &amp;&amp; iy&lt;ny)</span><br><span class="line">    &#123;</span><br><span class="line">      out[idx]=in[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä¸‹é™æ˜¯æˆ‘ä»¬çš„too young too naiveç‰ˆæœ¬ï¼Œå°±æ˜¯æœ€å¸¸è§„çš„æ–¹æ³•ï¼š<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">__<span class="function">global__ <span class="keyword">void</span> <span class="title">transformNaiveRow</span><span class="params">(<span class="keyword">float</span> * in,<span class="keyword">float</span> * out,<span class="keyword">int</span> nx,<span class="keyword">int</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ix=threadIdx.x+blockDim.x*blockIdx.x;</span><br><span class="line">    <span class="keyword">int</span> iy=threadIdx.y+blockDim.y*blockIdx.y;</span><br><span class="line">    <span class="keyword">int</span> idx_row=ix+iy*nx;</span><br><span class="line">    <span class="keyword">int</span> idx_col=ix*ny+iy;</span><br><span class="line">    <span class="keyword">if</span> (ix&lt;nx &amp;&amp; iy&lt;ny)</span><br><span class="line">    &#123;</span><br><span class="line">      out[idx_col]=in[idx_row];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>è¿™ä¸¤æ®µä»£ç ä¸­ç¬¬ä¸€æ®µå¹¶æ²¡æœ‰è½¬ç½®çš„åŠŸèƒ½ï¼Œåªæ˜¯ä¸ºäº†æµ‹è¯•ä¸Šé™ï¼Œç¬¬äºŒæ®µæ˜¯naiveçš„è½¬ç½®ï¼Œå‰é¢ä¹Ÿè®²è¿‡ï¼Œè¿™é‡Œå°±ç›´æ¥è´´ç»“æœäº†<br>copyRowçš„cpuè®¡æ—¶å’Œnvprofç»“æœï¼š<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-1.png" alt="re-1"><br>transformNaiveRowçš„cpuè®¡æ—¶å’Œnvprofç»“æœï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-2.png" alt="re-2"></p><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹è¡¨ï¼š</p><table><thead><tr><th style="text-align:center">æ ¸å‡½æ•°</th><th style="text-align:center">CPUè®¡æ—¶</th><th style="text-align:center">nvprofè®¡æ—¶</th></tr></thead><tbody><tr><td style="text-align:center">copyRow</td><td style="text-align:center">0.001442 s</td><td style="text-align:center">1.4859 ms</td></tr><tr><td style="text-align:center">transformNaiveRow</td><td style="text-align:center">0.003964 s</td><td style="text-align:center">3.9640 ms</td></tr></tbody></table><p>å¯ä»¥çœ‹å‡ºè®¡cpuè®¡æ—¶è¿˜æ˜¯æ¯”è¾ƒå‡†çš„ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç°åœ¨çš„çŸ©é˜µå¤§å°æ˜¯ $2^{12}\times 2^{12}$ çš„å¤§å°ã€‚<br>ç„¶åæ˜¯åŠ è½½å’Œå­˜å‚¨å…¨å±€å†…å­˜è¯·æ±‚çš„å¹³å‡äº‹åŠ¡æ•°ï¼ˆè¶Šå°‘è¶Šå¥½ï¼‰<br>copyRow:<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-3.png" alt="re-3"></p><p>transformNaiveRow:<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-4.png" alt="re-4"></p><p>æ¥ç€æˆ‘ä»¬å°±å¼€å§‹ç”¨å…±äº«å†…å­˜è¿›è¡Œæ“ä½œäº†ã€‚</p><h2 id="ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"><a href="#ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®" class="headerlink" title="ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"></a>ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®</h2><p>ä¸ºäº†é¿å…äº¤å‰è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒç»´å…±äº«å†…å­˜ç¼“å­˜åŸå§‹çŸ©é˜µæ•°æ®ï¼Œç„¶åä»å…±äº«å†…å­˜ä¸­è¯»å–ä¸€åˆ—å­˜å‚¨åˆ°å…¨å±€å†…å­˜ä¸­ï¼Œå› ä¸ºå…±äº«å†…å­˜æŒ‰åˆ—è¯»å–ä¸ä¼šå¯¼è‡´äº¤å‰è®¿é—®é‚£ä¹ˆä¸¥é‡çš„å»¶è¿Ÿï¼Œæ‰€ä»¥è¿™ç§æƒ³æ³•æ˜¯å¯ä»¥æé«˜æ•ˆç‡çš„ï¼Œä½†æ˜¯å‰é¢ä¸€ç¯‡æˆ‘ä»¬è¯´è¿™ç§æ¡ˆåˆ—è®¿é—®å…±äº«å†…å­˜ä¼šé€ æˆå†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥æŒ‰ç…§æœ€ç®€å•çš„æ–¹å¼æ¥ä½¿ç”¨å…±äº«å†…å­˜ï¼Œæ¥æµ‹è¯•ä¸‹çœ‹çœ‹æœ‰å¤šå°‘æ€§èƒ½æé«˜ï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-5.png" alt="re-5"><br>ä¸Šé¢è¿™ä¸ªå›¾å°±æ˜¯æˆ‘ä»¬çš„è½¬ç½®è¿‡ç¨‹</p><ul><li>ä»å…¨å±€å†…å­˜è¯»å–æ•°æ®ï¼ˆæŒ‰è¡Œï¼‰å†™å…¥å…±äº«å†…å­˜ï¼ˆæŒ‰è¡Œï¼‰</li><li>ä»å…±äº«å†…å­˜è¯»å–ä¸€åˆ—å†™å…¥å…¨å±€å†…å­˜çš„ä¸€è¡Œ</li></ul><p>å¦‚æœä»ä¸²è¡Œçš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªäºŒç»´çŸ©é˜µå…¶å­˜å‚¨åœ¨å†…å­˜çš„æ—¶å€™æ˜¯ä¸€ç»´çš„ï¼Œä¸€èˆ¬æˆ‘ä»¬æ˜¯æŠŠäºŒç»´çŸ©é˜µæŒ‰ç…§é€è¡Œçš„æ–¹å¼æ”¾å…¥ä¸€ç»´å†…å­˜ä¸­ï¼Œè½¬ç½®çš„è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºæŠŠé€è¡Œä»ä¸Šåˆ°ä¸‹æ•°æ®æ”¹æˆé€åˆ—ï¼Œä»å·¦åˆ°å³çš„æ•°æ®ã€‚<br>ç”±äºè¿‡ç¨‹å¾ˆç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£æ–¹å½¢çš„å…±äº«å†…å­˜ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ©å½¢çš„å…±äº«å†…å­˜ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸€èˆ¬æƒ…å†µä¸‹çš„æƒ…å†µä½¿ç”¨çŸ©å½¢çš„å…±äº«å†…å­˜ã€‚<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">__<span class="function">global__ <span class="keyword">void</span> <span class="title">transformSmem</span><span class="params">(<span class="keyword">float</span> * in,<span class="keyword">float</span>* out,<span class="keyword">int</span> nx,<span class="keyword">int</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__shared__ <span class="keyword">float</span> tile[BDIMY][BDIMX];</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ix,iy,transform_in_idx,transform_out_idx;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">	ix=threadIdx.x+blockDim.x*blockIdx.x;</span><br><span class="line">    iy=threadIdx.y+blockDim.y*blockIdx.y;</span><br><span class="line">	transform_in_idx=iy*nx+ix;</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> bidx,irow,icol;</span><br><span class="line">	bidx=threadIdx.y*blockDim.x+threadIdx.x;</span><br><span class="line">	irow=bidx/blockDim.y;</span><br><span class="line">	icol=bidx%blockDim.y;</span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line">	ix=blockIdx.y*blockDim.y+icol;</span><br><span class="line">	iy=blockIdx.x*blockDim.x+irow;</span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line">	transform_out_idx=iy*ny+ix;</span><br><span class="line">	<span class="keyword">if</span>(ix&lt;nx&amp;&amp; iy&lt;ny)</span><br><span class="line">	&#123;</span><br><span class="line">		tile[threadIdx.y][threadIdx.x]=in[transform_in_idx];</span><br><span class="line">		__syncthreads();</span><br><span class="line">		out[transform_out_idx]=tile[icol][irow];</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ç»“åˆä¸‹å›¾ï¼Œçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç è¿‡ç¨‹ï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/1-2.png" alt="1-2"></p><p>è§£é‡Šä»£ç ï¼Œè¿™æ®µä»£ç æ˜¯é€šç”¨ä»£ç ï¼Œå¹¶ä¸éœ€è¦çŸ©é˜µä¸ºæ­£æ–¹å½¢ï¼ˆç»“åˆä¸Šé¢çš„å›¾ï¼Œè¿‡ç¨‹ä¼šæ›´æ¸…æ™°ï¼‰ï¼š</p><ol><li>è®¡ç®—å½“å‰å—ä¸­çš„çº¿ç¨‹çš„å…¨å±€åæ ‡ï¼ˆç›¸å¯¹äºæ•´ä¸ªç½‘æ ¼ï¼‰ï¼Œè®¡ç®—å¯¹åº”çš„ä¸€ç»´çº¿æ€§å†…å­˜çš„ä½ç½®</li><li>bidxè¡¨ç¤ºblock idxä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªå¿«ä¸­çš„çº¿ç¨‹çš„åæ ‡çš„çº¿æ€§ä½ç½®ï¼ˆæŠŠå—ä¸­çš„äºŒç»´çº¿ç¨‹ä½ç½®æŒ‰ç…§é€è¡Œæ’å¸ƒçš„åŸåˆ™ï¼Œè½¬æ¢æˆä¸€ç»´çš„ï¼‰ï¼Œç„¶åè¿›è¡Œè½¬ç½®ï¼Œä¹Ÿå°±æ˜¯æ”¹æˆé€åˆ—æ’å¸ƒçš„æ–¹å¼ï¼Œè®¡ç®—å‡ºæ–°çš„äºŒç»´åæ ‡ï¼Œé€è¡Œåˆ°é€åˆ—æ’å¸ƒçš„æ˜ å°„å°±æ˜¯è½¬ç½®çš„æ˜ å°„ï¼Œè¿™åªå®Œæˆäº†å¾ˆå¤šå—ä¸­çš„ä¸€å—ï¼Œè€Œå…³é”®çš„æ˜¯æˆ‘ä»¬æŠŠè¿™å—æ”¾å›åˆ°å“ª</li><li>è®¡ç®—å‡ºè½¬ç½®åçš„äºŒç»´å…¨å±€çº¿ç¨‹çš„ç›®æ ‡åæ ‡ï¼Œæ³¨æ„è¿™é‡Œçš„è½¬ç½®å‰çš„è¡Œä½ç½®æ˜¯è®¡ç®—å‡ºæ¥çš„æ˜¯è½¬ç½®åçš„åˆ—çš„ä½ç½®ï¼Œè¿™å°±æ˜¯è½¬ç½®çš„ç¬¬äºŒæ­¥ã€‚</li><li>è®¡ç®—å‡ºè½¬ç½®åçš„äºŒç»´åæ ‡å¯¹åº”çš„å…¨å±€å†…å­˜çš„ä¸€ç»´ä½ç½®</li><li>è¯»å–å…¨å±€å†…å­˜ï¼Œå†™å…¥å…±äº«å†…å­˜ï¼Œç„¶åæŒ‰ç…§è½¬ç½®åçš„ä½ç½®å†™å…¥</li></ol><p>ä¸Šé¢5ä¸ªè¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºä¸¤æ­¥</p><ul><li>æŠŠå…±äº«å†…å­˜å†…çš„çŸ©é˜µè¿›è¡Œè½¬ç½®ï¼Œå¦‚æœä½ å‚»ä¹ä¹çš„çœŸçš„åˆ†é…ä¸¤å—å…±äº«å†…å­˜ï¼Œç„¶åè½¬ç½®ï¼Œå°±æœ‰ç‚¹å‚»äº†ï¼Œå½“ç„¶ä¹Ÿä¸èµæˆä½ æŒ‰ç…§è¡Œè¯»å–å…¨å±€å†…å­˜ç„¶åæŒ‰åˆ—å†™å…¥ï¼ˆæˆ‘å¼€å§‹å°±æ˜¯è¿™ä¹ˆæƒ³çš„ï¼‰ï¼Œè€Œæ˜¯å»ºç«‹ä¸€ç§è½¬ç½®çš„æ˜ å°„å…³ç³»ï¼Œå®Œæˆåˆ†å—è½¬ç½®ä¸­çš„æŸä¸€ä¸ªå—çš„è½¬ç½®ã€‚</li><li>æ‰¾åˆ°ä¸Šé¢è½¬ç½®å®Œäº†çš„å—çš„æ–°ä½ç½®ï¼Œç„¶åå†™å…¥å…¨å±€å†…å­˜ã€‚</li></ul><p>çœ‹ä¸€ä¸‹cpuè®¡æ—¶</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-5-5.png" alt="re-5-5"></p><p>nvprofç»“æœ;</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-6.png" alt="re-6"></p><p>ä»0.003964 såˆ°0.001803 s çœ‹èµ·æ¥è¿˜ä¸é”™ã€‚é€Ÿåº¦æå‡äº†ä¸€å€ã€‚<br>ç„¶åçœ‹ä¸€ä¸‹å¹³å‡å†…å­˜äº‹åŠ¡:</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-7.png" alt="re-7"></p><p>stroeè¿‡ç¨‹çš„äº‹åŠ¡æ•°ä»32é™ä½åˆ°4ï¼Œè¿˜æ˜¯å¾ˆæ˜¾è‘—çš„ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å…±äº«å†…å­˜çš„äº‹åŠ¡æ•°ï¼Œæ¥çœ‹çœ‹æ˜¯å¦æœ‰å†²çªï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-8.png" alt="re-8"></p><p>æ¯«ä¸æ„å¤–ï¼Œ16è·¯å†²çªï¼Œstoreæ²¡å†²çªï¼Œä¸»è¦æ¥è‡ªloadï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ–¹æ³•åªæœ‰å¡«å……</p><h2 id="ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"><a href="#ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®" class="headerlink" title="ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"></a>ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®</h2><p>è§£å†³å…±äº«å†…å­˜å†²çªçš„æœ€å¥½åŠæ³•å°±æ˜¯å¡«å……ï¼Œæˆ‘ä»¬æ¥å¡«å……ä¸‹æˆ‘ä»¬çš„å…±äº«å†…å­˜ï¼›<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">__<span class="function">global__ <span class="keyword">void</span> <span class="title">transformSmemPad</span><span class="params">(<span class="keyword">float</span> * in,<span class="keyword">float</span>* out,<span class="keyword">int</span> nx,<span class="keyword">int</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__shared__ <span class="keyword">float</span> tile[BDIMY][BDIMX+IPAD];</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ix,iy,transform_in_idx,transform_out_idx;</span><br><span class="line">	ix=threadIdx.x+blockDim.x*blockIdx.x;</span><br><span class="line">    iy=threadIdx.y+blockDim.y*blockIdx.y;</span><br><span class="line">	transform_in_idx=iy*nx+ix;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> bidx,irow,icol;</span><br><span class="line">	bidx=threadIdx.y*blockDim.x+threadIdx.x;</span><br><span class="line">	irow=bidx/blockDim.y;</span><br><span class="line">	icol=bidx%blockDim.y;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	ix=blockIdx.y*blockDim.y+icol;</span><br><span class="line">	iy=blockIdx.x*blockDim.x+irow;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	transform_out_idx=iy*ny+ix;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(ix&lt;nx&amp;&amp; iy&lt;ny)</span><br><span class="line">	&#123;</span><br><span class="line">		tile[threadIdx.y][threadIdx.x]=in[transform_in_idx];</span><br><span class="line">		__syncthreads();</span><br><span class="line">		out[transform_out_idx]=tile[icol][irow];</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä¸ºä¸€çš„ä¸åŒå°±æ˜¯IPADï¼Œæˆ‘ä»¬ä¸»è¦çœ‹æŒ‡æ ‡ï¼š<br>è¿è¡Œç»“æœï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-8-5.png" alt="re-8-5"><br>å¯è§æ‰§è¡Œé€Ÿåº¦ä»0.0018é™ä½åˆ°0.0015<br>nvprofç»“æœï¼š<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-9.png" alt="re-9"><br>æˆ‘ä»¬ä¸»è¦å…³æ³¨å…±äº«å†…å­˜äº‹åŠ¡,å…¨å±€äº‹åŠ¡æ²¡æœ‰æ”¹å˜ã€‚<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-11.png" alt="re-11"><br>è¿˜æœ‰å†²çªï¼Œæˆ‘ä»¬æ”¹å˜IPADè¯•è¯•ï¼ˆä»1åˆ°2ï¼‰</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-12.png" alt="re-12"><br>å“ˆå“ˆï¼Œå†²çªä¸è§äº†ï¼Œæ‰§è¡ŒCPUè®¡æ—¶ï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-13.png" alt="re-13"><br>å†²çªè§£å†³äº†ä½†æ˜¯ä¼¼ä¹é€Ÿåº¦æ²¡æœ‰æ˜¾è‘—æå‡ã€‚</p><h2 id="ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®"><a href="#ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®" class="headerlink" title="ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®"></a>ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®</h2><p>åœ¨å…±äº«å†…å­˜è¿›è¡Œå¡«å……æ¶ˆé™¤å†²çªåï¼Œæˆ‘ä»¬è¿˜æƒ³ç»§ç»­æé«˜æ€§èƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨å‰é¢æåˆ°äº†å¦ä¸€ä¸ªå¤§æ€å™¨ï¼Œå±•å¼€å¾ªç¯ï¼ŒèŠ‚çœå¤§é‡çš„çº¿ç¨‹å—ï¼Œæé«˜å¸¦å®½åˆ©ç”¨ç‡ï¼š<br>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œç„¶åå†è§£é‡Šï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">__<span class="function">global__ <span class="keyword">void</span> <span class="title">transformSmemUnrollPad</span><span class="params">(<span class="keyword">float</span> * in,<span class="keyword">float</span>* out,<span class="keyword">int</span> nx,<span class="keyword">int</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	__shared__ <span class="keyword">float</span> tile[BDIMY*(BDIMX*<span class="number">2</span>+IPAD)];</span><br><span class="line"><span class="comment">//1.</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ix,iy,transform_in_idx,transform_out_idx;</span><br><span class="line">	ix=threadIdx.x+blockDim.x*blockIdx.x*<span class="number">2</span>;</span><br><span class="line">    iy=threadIdx.y+blockDim.y*blockIdx.y;</span><br><span class="line">	transform_in_idx=iy*nx+ix;</span><br><span class="line"><span class="comment">//2.</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> bidx,irow,icol;</span><br><span class="line">	bidx=threadIdx.y*blockDim.x+threadIdx.x;</span><br><span class="line">	irow=bidx/blockDim.y;</span><br><span class="line">	icol=bidx%blockDim.y;</span><br><span class="line"><span class="comment">//3.</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ix2=blockIdx.y*blockDim.y+icol;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> iy2=blockIdx.x*blockDim.x*<span class="number">2</span>+irow;</span><br><span class="line"><span class="comment">//4.</span></span><br><span class="line">	transform_out_idx=iy2*ny+ix2;</span><br><span class="line">	<span class="keyword">if</span>(ix+blockDim.x&lt;nx&amp;&amp; iy&lt;ny)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> row_idx=threadIdx.y*(blockDim.x*<span class="number">2</span>+IPAD)+threadIdx.x;</span><br><span class="line">		tile[row_idx]=in[transform_in_idx];</span><br><span class="line">		tile[row_idx+BDIMX]=in[transform_in_idx+BDIMX];</span><br><span class="line"><span class="comment">//5</span></span><br><span class="line">		__syncthreads();</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> col_idx=icol*(blockDim.x*<span class="number">2</span>+IPAD)+irow;</span><br><span class="line">        out[transform_out_idx]=tile[col_idx];</span><br><span class="line">		out[transform_out_idx+ny*BDIMX]=tile[col_idx+BDIMX];</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ²¡é”™ï¼Œä¸€ä¸ªçº¿ç¨‹å¹²ä¸¤ä¸ªçº¿ç¨‹çš„äº‹ï¼Œæˆ–è€…è¯´ä¸€ä¸ªå—å¹²ä¸¤ä¸ªå—çš„äº‹ï¼Œå…¶å®ç»“åˆå‰é¢çš„å…±äº«å†…å­˜è½¬ç½®çš„è¯¦ç»†è¯´æ˜ï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å†å†™ä¸€éï¼Œä»¥å…æœ‰é—æ¼ï¼Œæˆ–è€…è§£é‡Šä¸æ¸…æ¥šã€‚<br>å½“ç„¶ï¼Œçœ‹å›¾æ›´æ¸…æ¥šï¼Œæ³¨æ„ä¸ä¸Šé¢çš„ä»£ç è¿›è¡Œå¯¹æ¯”ï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/1-3.png" alt="1-3"></p><ol><li>è®¡ç®—å½“å‰å—ä¸­çš„çº¿ç¨‹çš„å…¨å±€åæ ‡â€”â€”ä¸€ç»´çº¿æ€§å†…å­˜çš„ä½ç½®</li><li>åœ¨å…±äº«å†…å­˜å†…è¿›è¡Œè½¬ç½®</li><li>è®¡ç®—å‡ºè½¬ç½®åçš„äºŒç»´å…¨å±€çº¿ç¨‹çš„ç›®æ ‡åæ ‡ï¼Œæ³¨æ„è¿™é‡Œçš„è½¬ç½®å‰çš„è¡Œä½ç½®æ˜¯è®¡ç®—å‡ºæ¥çš„æ˜¯è½¬ç½®åçš„åˆ—çš„ä½ç½®ï¼Œè¿™å°±æ˜¯è½¬ç½®çš„ç¬¬äºŒæ­¥ã€‚</li><li>è®¡ç®—å‡ºè½¬ç½®åçš„äºŒç»´åæ ‡å¯¹åº”çš„å…¨å±€å†…å­˜çš„ä¸€ç»´ä½ç½®ï¼Œæ³¨æ„è¿™é‡Œä¸æ˜¯ä¸€æ¬¡è®¡ç®—ä¸€ä¸ªå—ï¼Œè€Œæ˜¯è®¡ç®—ä¸¤ä¸ªå—ï¼Œæ¢ä¸ªç†è§£æ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠåŸæ¥çš„å—xæ–¹å‘æ‰©å¤§ä¸€å€ï¼Œç„¶åå†å¯¹è¿™ä¸ªå¤§å—åˆ†æˆä¸¤ä¸ªå°å—ï¼ˆï¼ŒBï¼‰ï¼Œæ¯ä¸ªå°å—ä¸­çš„å¯¹åº”ä½ç½®å·®BDIMXï¼Œç„¶åå¯¹å…¶ä¸­Aï¼ŒBä¸­æ•°æ®æŒ‰è¡Œå†™å…¥å…±äº«å†…å­˜ã€‚</li><li>å°†4ä¸­è¯»å–åˆ°å…±äº«å†…å­˜ä¸­çš„æ•°æ®ï¼ŒæŒ‰ç…§è½¬ç½®åçš„ä½ç½®å†™å…¥å…¨å±€å†…å­˜ã€‚</li></ol><p>è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥ä¸éº»çƒ¦ï¼Œå†™èµ·æ¥æœ‰ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œå°±æ˜¯ç”»å›¾ï¼Œä½ ç”»ä¸ªå›¾å°±åŸºæœ¬æ˜ç™½äº†ã€‚<br>æˆ‘ä»¬çœ‹ä¸€ä¸‹nvprofçš„ç»“æœï¼Œä»¥åŠå…¨å±€å†…å­˜çš„äº‹åŠ¡ã€‚<br>nvprofï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-1-13-5.png" alt="re-1-13-5"></p><p>å…¨å±€å†…å­˜äº‹åŠ¡ï¼š<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-14.png" alt="re-14"></p><p>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬å½“å‰çš„ç¯å¢ƒä¸‹ï¼Œå±•å¼€å¹¶æ²¡æœ‰æé€Ÿï¼Œæˆ‘ä»¬å¯ä»¥å±•å¼€æ›´å¤šè¯•è¯•ï¼Œè¿™é‡Œå°±ä¸åšè¯•éªŒäº†ã€‚</p><h2 id="å¢å¤§å¹¶è¡Œæ€§"><a href="#å¢å¤§å¹¶è¡Œæ€§" class="headerlink" title="å¢å¤§å¹¶è¡Œæ€§"></a>å¢å¤§å¹¶è¡Œæ€§</h2><p>å¢å¤§å¹¶è¡Œæ€§çš„åŠæ³•æ˜¯è°ƒæ•´æ ¸å‡½æ•°çš„é…ç½®ï¼Œæˆ‘ä»¬è°ƒæ•´æˆ $16\times 16$ çš„å—ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š</p><p><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-15.png" alt="re-15"></p><p>è°ƒæ•´æˆ $8\times 8$ çš„å—çš„ç»“æœå¦‚ä¸‹<br><img src="https://tony4ai-1251394096.cos.ap-hongkong.myqcloud.com/blog_images/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/re-16.png" alt="re-16"></p><p>è¿™ä¸ªè¦è€ƒå¤§å®¶ä¸åœçš„è¯•æ‰èƒ½æ‰¾åˆ°å½“å‰è®¾å¤‡æœ€ä¼˜çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡ä½¿ç”¨å…±äº«å†…å­˜é¿å…äº¤å‰çš„å…¨å±€å†…å­˜è®¿é—®ï¼Œä¼˜åŒ–äº†çŸ©é˜µè½¬ç½®çš„é€Ÿåº¦ã€‚</p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Tony</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="http://www.face2ai.com/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/" title="ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®">http://www.face2ai.com/CUDA-F-5-4-åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/CUDA-F-5-3-å‡å°‘å…¨å±€å†…å­˜è®¿é—®/" rel="next" title="ã€CUDA åŸºç¡€ã€‘5.3 å‡å°‘å…¨å±€å†…å­˜è®¿é—®"><i class="fa fa-chevron-left"></i> ã€CUDA åŸºç¡€ã€‘5.3 å‡å°‘å…¨å±€å†…å­˜è®¿é—®</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/CUDA-F-5-5-å¸¸é‡å†…å­˜/" rel="prev" title="ã€CUDA åŸºç¡€ã€‘5.5 å¸¸é‡å†…å­˜">ã€CUDA åŸºç¡€ã€‘5.5 å¸¸é‡å†…å­˜ <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1194454329688573" data-ad-slot="2491973880" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="comments"><div id="SOHUCS" sid="ã€CUDA åŸºç¡€ã€‘5.4 åˆå¹¶çš„å…¨å±€å†…å­˜è®¿é—®"></div></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1194454329688573" data-ad-slot="2491973880" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">ç«™ç‚¹æ¦‚è§ˆ</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Tony"><p class="site-author-name" itemprop="name">Tony</p><p class="site-description motion-element" itemprop="description">å…³æ³¨æœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œæœºå™¨è§†è§‰ï¼Œæ¨¡å¼è¯†åˆ«</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">257</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">17</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/tony-tan" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:tony.face2ai@gmail.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://twitter.com/Tony_Face2AI" target="_blank" title="Twitter" rel="external nofollow"><i class="fa fa-fw fa-twitter"></i>Twitter</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#å¼€ç¯‡åºŸè¯"><span class="nav-number">1.</span> <span class="nav-text">å¼€ç¯‡åºŸè¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŸºå‡†è½¬ç½®å†…æ ¸"><span class="nav-number">2.</span> <span class="nav-text">åŸºå‡†è½¬ç½®å†…æ ¸</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"><span class="nav-number">3.</span> <span class="nav-text">ä½¿ç”¨å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®"><span class="nav-number">4.</span> <span class="nav-text">ä½¿ç”¨å¡«å……å…±äº«å†…å­˜çš„çŸ©é˜µè½¬ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®"><span class="nav-number">5.</span> <span class="nav-text">ä½¿ç”¨å±•å¼€çš„çŸ©é˜µè½¬ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¢å¤§å¹¶è¡Œæ€§"><span class="nav-number">6.</span> <span class="nav-text">å¢å¤§å¹¶è¡Œæ€§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">7.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-"></i> </span><span class="author" itemprop="copyrightHolder">Tony</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="æ€»è®¿å®¢é‡"><i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv" title="æ€»è®¿é—®é‡"><i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script><script type="text/javascript">!function(){var t,e,n,a,c="cytcx5tqt",o="7d2a0eea950acb0b0bf23e09e0fd3bd5";if((window.innerWidth||document.documentElement.clientWidth)<960)window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id='+c+"&conf="+o+'"><\/script>');else{t="https://changyan.sohu.com/upload/changyan.js",e=function(){window.changyan.api.config({appid:c,conf:o})},n=document.getElementsByTagName("head")[0]||document.head||document.documentElement,(a=document.createElement("script")).setAttribute("type","text/javascript"),a.setAttribute("charset","UTF-8"),a.setAttribute("src",t),"function"==typeof e&&(window.attachEvent?a.onreadystatechange=function(){var t=a.readyState;"loaded"!==t&&"complete"!==t||(a.onreadystatechange=null,e())}:a.onload=e),n.appendChild(a)}}()</script><script type="text/javascript" src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>